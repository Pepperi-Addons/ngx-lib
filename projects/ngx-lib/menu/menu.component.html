<div class="menu-container" [ngClass]="{ 'spacing-element': state === 'visible' }">
    <ng-container *ngIf="showAnimation then animationTemplate else regularTemplate">
    </ng-container>
    <ng-template #animationTemplate>
        <button mat-button class="pep-button icon-button {{ sizeType }} {{ styleType }} {{ classNames }}"
            [matMenuTriggerFor]="actionsMenu" pepMenuBlur [@slideInOut]="state" (@slideInOut.done)="animationDone()"
            (@slideInOut.start)="animationStart()" (menuClick)="onMenuClicked($event)">
            <mat-icon>
                <pep-icon name="{{icon}}"></pep-icon>
            </mat-icon>
        </button>
    </ng-template>
    <ng-template #regularTemplate>
        <button mat-button class="pep-button icon-button {{ sizeType }} {{ styleType }} {{ classNames }}"
            [matMenuTriggerFor]="actionsMenu" pepMenuBlur (menuClick)="onMenuClicked($event)" [disabled]="disabled"
            [ngClass]="{ disabled: disabled }">
            <mat-icon>
                <pep-icon name="{{icon}}"></pep-icon>
            </mat-icon>
        </button>
    </ng-template>

    <mat-menu #actionsMenu="matMenu" xPosition="{{ xPosition }}">
        <ng-container *ngFor="let item of items">
            <button *ngIf="!item.hidden" mat-menu-item (click)="onMenuItemClicked(item)" title="{{ item.title }}"
                [disabled]="item.disabled"
                [ngClass]="{ 'splitter': item.type === 'splitter', disabled: item.disabled }">
                <ng-container *ngIf="item.type !== 'splitter'">
                    <mat-icon *ngIf="item?.icon && item?.icon.position === 'before'" class="pull-left flip">
                        <pep-icon name="{{ item?.icon?.name }}"></pep-icon>
                    </mat-icon>
                    <span class="pull-left flip">
                        <span *ngIf="item?.icon && item?.icon.position === 'before'">&nbsp;</span>
                        {{ item?.title }}
                        <span *ngIf="item?.icon && item?.icon.position === 'after'">&nbsp;</span>
                    </span>
                    <mat-icon *ngIf="item?.icon && item?.icon.position === 'after'" class="pull-left flip">
                        <pep-icon name="{{ item?.icon?.name }}"></pep-icon>
                    </mat-icon>
                </ng-container>
            </button>
        </ng-container>
    </mat-menu>
</div>