{"version":3,"file":"pepperi-addons-ngx-lib-files-uploader.umd.js","sources":["../../../projects/ngx-lib/files-uploader/files-uploader.component.html","../../../projects/ngx-lib/files-uploader/files-uploader.component.ts","../../../projects/ngx-lib/files-uploader/files-uploader.module.ts","../../../projects/ngx-lib/files-uploader/public-api.ts","../../../projects/ngx-lib/files-uploader/pepperi-addons-ngx-lib-files-uploader.ts"],"sourcesContent":["<!-- New code -->\r\n<ng-template #pepperiTemplate>\r\n    <mat-form-field [formGroup]=\"form\" appearance=\"outline\">\r\n        <div class=\"pepperi-file-wrapper\">\r\n            <div class=\"pepperi-file body-sm\" [style.height]=\"fieldHeight\" [ngClass]=\"{\r\n                    'one-row': rowSpan == 1,\r\n                    disable: disabled\r\n                }\">\r\n                <ng-container *ngIf=\"src != ''; then withImg; else noImg\"></ng-container>\r\n                <ng-template #withImg>\r\n                    <button *ngIf=\"!disabled\" mat-button (click)=\"deleteFile()\"\r\n                        class=\"pepperi-button icon-button weak md delete\" tabindex=\"-1\"\r\n                        [ngClass]=\"{ 'right-alignment': xAlignment == '2' }\">\r\n                        <mat-icon>\r\n                            <pep-icon name=\"system_bin\">\r\n                            </pep-icon>\r\n                        </mat-icon>\r\n                    </button>\r\n                    <div class=\"pepperi-file-preview\" (click)=\"onElementClicked($event)\">\r\n                        <img *ngIf=\"controlType === 'image'\" #imagePreview [src]=\"src\" class=\"pepperi-file-preview-img\"\r\n                            [style.max-height]=\"fieldHeight\" (error)=\"errorHandler($event)\" [alt]=\"label\"\r\n                            [ngClass]=\"['text-align-' + xAlignment]\" />\r\n                        <div *ngIf=\"controlType === 'attachment'\" class=\"ellipsis pepperi-file-message\">\r\n                            <a *ngIf=\"src != ''\" href=\"javascript:void(0)\">\r\n                                <pep-icon name=\"system_attach\">\r\n                                </pep-icon>\r\n                                <span class=\"body-sm ellipsis\">{{ 'FILE.SEE_ORIGINAL' | translate }}</span>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template #noImg>\r\n                    <div class=\"ellipsis pepperi-file-message\">\r\n                        <pep-icon *ngIf=\"controlType === 'attachment'\" name=\"system_attach\">\r\n                        </pep-icon>\r\n                        <pep-icon *ngIf=\"controlType === 'image'\" name=\"system_file_upload_cloud\">\r\n                        </pep-icon>\r\n                        <span class=\"body-sm ellipsis\" *ngIf=\"progress == 0\">\r\n                            {{ (disabled ? (controlType === 'image' ? 'MESSAGES.INFO_MISSING_IMAGE' : 'MESSAGES.INFO_MISSING_FILE') : 'FILE.HINT') | translate }}\r\n                        </span>\r\n                        <!-- <p *ngIf=\"progress != 0\" class=\"pull-left flip\"\r\n                            [ngClass]=\"{ 'pull-left flip': rowSpan == 1, image: controlType == 'image', attachment: controlType == 'attachment' }\">\r\n                            {{ 'FILE.UPLOADING_FILE' | translate }}\r\n                        </p> -->\r\n                    </div>\r\n                    <ng-container *ngIf=\"!disabled\">\r\n                        <input #fileInput id=\"pepperi-file-{{ key }}\" tabindex=\"-1\" type=\"file\"\r\n                            accept=\"acceptedExtensions\" ng2FileSelect [uploader]=\"uploader\" autocomplete=\"off\" />\r\n                        <button *ngIf=\"progress != 0\" mat-button class=\"pepperi-button icon-button weak md delete\"\r\n                            [ngClass]=\"{ 'right-alignment': xAlignment == '2' }\">\r\n                            <mat-icon>\r\n                                <pep-icon name=\"system_processing\" class=\"spin-icon\">\r\n                                </pep-icon>\r\n                            </mat-icon>\r\n                        </button>\r\n                    </ng-container>\r\n                </ng-template>\r\n            </div>\r\n            <input [id]=\"key\" matInput [name]=\"key\" [formControlName]=\"key\" class=\"hidden-input\" type=\"text\"\r\n                [value]=\"src\" [disabled]=\"disabled\" (click)=\"onClick_ChooseFile($event)\"\r\n                (keypress)=\"onKeyPress_ChooseFile($event)\" autocomplete=\"off\" />\r\n        </div>\r\n\r\n        <mat-error><span class=\"body-xs\"\r\n                [title]=\"required && src.length == 0 ? ('MESSAGES.ERROR_IS_REQUIRED' | translate: { field: label }) : ('MESSAGES.ERROR_IS_NOT_VALID' | translate: { field: label })\"\r\n                [innerText]=\"required && src.length == 0 ? ('MESSAGES.ERROR_IS_REQUIRED' | translate: { field: label }) : ('MESSAGES.ERROR_IS_NOT_VALID' | translate: { field: label })\"></span>\r\n        </mat-error>\r\n    </mat-form-field>\r\n</ng-template>\r\n\r\n<ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiForm\">\r\n    <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container>\r\n</ng-container>\r\n\r\n<ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiCard\">\r\n    <!-- <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container> -->\r\n</ng-container>\r\n\r\n<ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiTable\">\r\n    <!-- <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container> -->\r\n</ng-container>","import { Observable } from 'rxjs';\r\nimport { Component, OnInit, Injectable, Input, Output, EventEmitter, ViewChild, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { FileUploader } from 'ng2-file-upload';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { FileService, LAYOUT_TYPE, CustomizationService } from '@pepperi-addons/ngx-lib';\r\nimport { DialogService, DialogData, DialogDataType } from '@pepperi-addons/ngx-lib/dialog';\r\n\r\n@Component({\r\n    selector: 'files-uploader',\r\n    templateUrl: './files-uploader.component.html',\r\n    styleUrls: ['./files-uploader.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\n@Injectable()\r\nexport class FilesUploaderComponent implements OnInit {\r\n    @Input() key = '';\r\n    @Input() src = '';\r\n    @Input() label = '';\r\n    @Input() required = false;\r\n    @Input() disabled = false;\r\n    @Input() xAlignment = '0';\r\n    @Input() rowSpan = 1;\r\n    @Input() controlType = '';\r\n    @Input() sizeLimitMB = 5;\r\n\r\n    @Input() form: FormGroup;\r\n    @Input() standAlone = false;\r\n    @Input() acceptedExtensions = 'bmp,jpg,jpeg,png,gif,ico,svg,html,css';\r\n    @Input() layoutType: LAYOUT_TYPE = LAYOUT_TYPE.PepperiForm;\r\n\r\n    @Output() fileChanged: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() elementClicked: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @ViewChild('fileInput') fileInput: any;\r\n    @ViewChild('imagePreview') imagePreview: any;\r\n\r\n    LAYOUT_TYPE = LAYOUT_TYPE;\r\n    fieldHeight = '';\r\n\r\n    // multiple = false;\r\n    uploader: FileUploader;\r\n    progress = 0;\r\n    // response: string;\r\n    intervalID: any = null;\r\n\r\n    constructor(\r\n        private translate: TranslateService,\r\n        private dialogService: DialogService,\r\n        private customizationService: CustomizationService,\r\n        private fileService: FileService)\r\n    {\r\n        const self = this;\r\n        this.uploader = new FileUploader({ removeAfterUpload: true });\r\n\r\n        this.uploader.onAfterAddingFile = (item) => {\r\n            if (self.fileInput?.nativeElement) {\r\n                self.fileInput.nativeElement.value = '';\r\n            }\r\n            const reader = new FileReader();\r\n\r\n            reader.onload = (event: any) => {\r\n                const fileExt = item._file.name.split('.').pop();\r\n                const target = event.target || event.srcElement;\r\n                const fileStr = target.result;\r\n                const errorMsg = self.isValidFile(fileStr, fileExt, self.acceptedExtensions, self.sizeLimitMB);\r\n                if (errorMsg === '') {\r\n                    self.src = fileStr;\r\n                    self.setIntervalX(25, 75);\r\n                    self.setProgress(5);\r\n                    self.fileChanged.emit(\r\n                        JSON.stringify({\r\n                            acceptedExtensions: self.acceptedExtensions,\r\n                            fileStr,\r\n                            fileExt,\r\n                        }));\r\n                }\r\n                else {\r\n                    const title = self.translate.instant('MESSAGES.TITLE_NOTICE');\r\n                    const data = new DialogData({\r\n                        title,\r\n                        content: errorMsg,\r\n                        contentType: DialogDataType.Html});\r\n                    self.dialogService.openDefaultDialog(data);\r\n                }\r\n\r\n            };\r\n            reader.readAsDataURL(item._file);\r\n        };\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.fieldHeight = this.customizationService.calculateFieldHeight(this.layoutType, this.rowSpan, this.standAlone);\r\n\r\n        /*this.uploader.onCompleteAll = () => {\r\n            this.fileInput.nativeElement.value = '';\r\n        }*/\r\n    }\r\n\r\n    isValidFile(fileStr, fileExtension, acceptedExtensions, sizeLimitMB = 5): string {\r\n        const file: any = fileStr;\r\n        let fileSize = 0;\r\n        let content = '';\r\n        // check if got file as Base64\r\n        if (typeof fileStr === 'string' && fileStr.indexOf('data:') > -1) {\r\n            fileSize = this.getBase64FileSize(fileStr);\r\n        } else {\r\n            fileSize = file.size;\r\n        }\r\n        // check the size and the extension\r\n        const sizeOK: boolean = fileSize !== -1 && file != null && fileSize < sizeLimitMB * (1048576);\r\n        const extensionOK = acceptedExtensions === '' || acceptedExtensions.indexOf(fileExtension.toLowerCase()) !== -1;\r\n        if (!extensionOK) {\r\n            content = this.translate.instant('MESSAGES.ERROR_FAILD_TO_LOAD_EXTENSION',\r\n                { fileExtension: '<label class=\\'uppercase bold\\'>' + fileExtension + '</label>' });\r\n        } else if (!sizeOK) {\r\n            content = this.translate.instant('MESSAGES.ERROR_FAILD_TO_LOAD_SIZE',\r\n                { fileSize: '<label class=\\'uppercase bold\\'>' + (sizeLimitMB).toString() + '</label>' });\r\n        }\r\n        return content;\r\n    }\r\n\r\n    getBase64FileSize(base64String: string): number {\r\n        let fileSize: number;\r\n\r\n        try {\r\n            base64String = base64String.substr(base64String.indexOf(',') + 1);\r\n            fileSize = atob(base64String).length;\r\n        } catch (e) {\r\n            fileSize = -1;\r\n        }\r\n\r\n        return fileSize; // return size in bytes;\r\n    }\r\n\r\n    setIntervalX(delay, repetitions): void {\r\n        const self = this;\r\n        let x = 0;\r\n        this.intervalID = window.setInterval(() => {\r\n            // self.setProgress(self.progress + 5);\r\n            if (++x === repetitions || self.uploader.progress >= 100) {\r\n                window.clearInterval(self.intervalID);\r\n            }\r\n        }, delay);\r\n    }\r\n\r\n    errorHandler(event): void {\r\n        event.target.src = this.fileService.getNoImagePath();\r\n        event.target.title = this.translate.instant('IMAGE.NO_IMAGE');\r\n    }\r\n\r\n    private setProgress(progress): void {\r\n        this.progress = progress;\r\n        this.uploader.progress = progress;\r\n    }\r\n\r\n    deleteFile(): void {\r\n        this.uploader.clearQueue();\r\n        window.clearInterval(this.intervalID);\r\n        this.setProgress(0);\r\n\r\n        const value = '';\r\n        this.src = value;\r\n        this.fileChanged.emit(value);\r\n    }\r\n\r\n    onElementClicked(event): void {\r\n        this.elementClicked.emit({ apiName: this.key, event });\r\n    }\r\n\r\n    onClick_ChooseFile(event): void {\r\n        if (this.fileInput?.nativeElement) {\r\n            this.fileInput.nativeElement.click();\r\n        }\r\n    }\r\n\r\n    onKeyPress_ChooseFile(event): void {\r\n        const e = event as KeyboardEvent;\r\n\r\n        if ([13, 32].indexOf(e.which) !== -1) {\r\n            if (this.fileInput?.nativeElement) {\r\n                this.fileInput.nativeElement.click();\r\n            }\r\n        }\r\n        e.preventDefault();\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\n\r\nimport { MatCommonModule } from '@angular/material/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatIconModule } from '@angular/material/icon';\r\n\r\nimport { FileUploadModule } from 'ng2-file-upload';\r\n\r\nimport { PepperiModule } from '@pepperi-addons/ngx-lib';\r\nimport {\r\n    PepperiIconModule,\r\n    PepperiIconRegistry,\r\n    pepperiIconSystemBin,\r\n    pepperiIconSystemAttach,\r\n    pepperiIconSystemFileUploadCloud,\r\n    pepperiIconSystemProcessing\r\n} from '@pepperi-addons/ngx-lib/icon';\r\nimport { PepperiDialogModule } from '@pepperi-addons/ngx-lib/dialog';\r\n\r\nimport { FilesUploaderComponent } from './files-uploader.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        ReactiveFormsModule,\r\n        FormsModule,\r\n        // Material modules,\r\n        MatCommonModule,\r\n        MatButtonModule,\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatIconModule,\r\n        // External modules\r\n        FileUploadModule,\r\n        // Pepperi modules\r\n        PepperiModule,\r\n        PepperiIconModule,\r\n        PepperiDialogModule\r\n    ],\r\n    exports: [FilesUploaderComponent],\r\n    declarations: [FilesUploaderComponent],\r\n})\r\nexport class PepperiFilesUploaderModule {\r\n    constructor(private pepperiIconRegistry: PepperiIconRegistry) {\r\n        this.pepperiIconRegistry.registerIcons([\r\n            pepperiIconSystemBin,\r\n            pepperiIconSystemAttach,\r\n            pepperiIconSystemFileUploadCloud,\r\n            pepperiIconSystemProcessing\r\n        ]);\r\n    }\r\n}\r\n","/*\r\n * Public API Surface of ngx-lib/files-uploader\r\n */\r\nexport * from './files-uploader.module';\r\nexport * from './files-uploader.component';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementContainer","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵproperty","i0.ɵɵstyleProp","i0.ɵɵtext","i0.ɵɵadvance","i0.ɵɵtextInterpolate","i0.ɵɵtemplate","i0.ɵɵtextInterpolate1","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵpropertyInterpolate1","LAYOUT_TYPE","EventEmitter","FileUploader","DialogData","DialogDataType","Component","ChangeDetectionStrategy","Injectable","Input","Output","ViewChild","pepperiIconSystemBin","pepperiIconSystemAttach","pepperiIconSystemFileUploadCloud","pepperiIconSystemProcessing","CommonModule","ReactiveFormsModule","FormsModule","MatCommonModule","MatButtonModule","MatFormFieldModule","MatInputModule","MatIconModule","FileUploadModule","PepperiModule","PepperiIconModule","PepperiDialogModule","NgModule"],"mappings":"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"}