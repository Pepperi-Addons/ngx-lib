{"version":3,"file":"pepperi-addons-ngx-lib-files-uploader.js","sources":["../../../projects/ngx-lib/files-uploader/files-uploader.component.html","../../../projects/ngx-lib/files-uploader/files-uploader.component.ts","../../../projects/ngx-lib/files-uploader/files-uploader.module.ts","../../../projects/ngx-lib/files-uploader/public-api.ts","../../../projects/ngx-lib/files-uploader/pepperi-addons-ngx-lib-files-uploader.ts"],"sourcesContent":["<!-- New code -->\r\n<ng-template #pepperiTemplate>\r\n    <mat-form-field [formGroup]=\"form\" appearance=\"outline\">\r\n        <div class=\"pepperi-file-wrapper\">\r\n            <div class=\"pepperi-file body-sm\" [style.height]=\"fieldHeight\" [ngClass]=\"{\r\n                    'one-row': rowSpan == 1,\r\n                    disable: disabled\r\n                }\">\r\n                <ng-container *ngIf=\"src != ''; then withImg; else noImg\"></ng-container>\r\n                <ng-template #withImg>\r\n                    <button *ngIf=\"!disabled\" mat-button (click)=\"deleteFile()\"\r\n                        class=\"pepperi-button icon-button weak md delete\" tabindex=\"-1\"\r\n                        [ngClass]=\"{ 'right-alignment': xAlignment == '2' }\">\r\n                        <mat-icon>\r\n                            <pep-icon name=\"system_bin\">\r\n                            </pep-icon>\r\n                        </mat-icon>\r\n                    </button>\r\n                    <div class=\"pepperi-file-preview\" (click)=\"onElementClicked($event)\">\r\n                        <img *ngIf=\"controlType === 'image'\" #imagePreview [src]=\"src\" class=\"pepperi-file-preview-img\"\r\n                            [style.max-height]=\"fieldHeight\" (error)=\"errorHandler($event)\" [alt]=\"label\"\r\n                            [ngClass]=\"['text-align-' + xAlignment]\" />\r\n                        <div *ngIf=\"controlType === 'attachment'\" class=\"ellipsis pepperi-file-message\">\r\n                            <a *ngIf=\"src != ''\" href=\"javascript:void(0)\">\r\n                                <pep-icon name=\"system_attach\">\r\n                                </pep-icon>\r\n                                <span class=\"body-sm ellipsis\">{{ 'FILE.SEE_ORIGINAL' | translate }}</span>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template #noImg>\r\n                    <div class=\"ellipsis pepperi-file-message\">\r\n                        <pep-icon *ngIf=\"controlType === 'attachment'\" name=\"system_attach\">\r\n                        </pep-icon>\r\n                        <pep-icon *ngIf=\"controlType === 'image'\" name=\"system_file_upload_cloud\">\r\n                        </pep-icon>\r\n                        <span class=\"body-sm ellipsis\" *ngIf=\"progress == 0\">\r\n                            {{ (disabled ? (controlType === 'image' ? 'MESSAGES.INFO_MISSING_IMAGE' : 'MESSAGES.INFO_MISSING_FILE') : 'FILE.HINT') | translate }}\r\n                        </span>\r\n                        <!-- <p *ngIf=\"progress != 0\" class=\"pull-left flip\"\r\n                            [ngClass]=\"{ 'pull-left flip': rowSpan == 1, image: controlType == 'image', attachment: controlType == 'attachment' }\">\r\n                            {{ 'FILE.UPLOADING_FILE' | translate }}\r\n                        </p> -->\r\n                    </div>\r\n                    <ng-container *ngIf=\"!disabled\">\r\n                        <input #fileInput id=\"pepperi-file-{{ key }}\" tabindex=\"-1\" type=\"file\"\r\n                            accept=\"acceptedExtensions\" ng2FileSelect [uploader]=\"uploader\" autocomplete=\"off\" />\r\n                        <button *ngIf=\"progress != 0\" mat-button class=\"pepperi-button icon-button weak md delete\"\r\n                            [ngClass]=\"{ 'right-alignment': xAlignment == '2' }\">\r\n                            <mat-icon>\r\n                                <pep-icon name=\"system_processing\" class=\"spin-icon\">\r\n                                </pep-icon>\r\n                            </mat-icon>\r\n                        </button>\r\n                    </ng-container>\r\n                </ng-template>\r\n            </div>\r\n            <input [id]=\"key\" matInput [name]=\"key\" [formControlName]=\"key\" class=\"hidden-input\" type=\"text\"\r\n                [value]=\"src\" [disabled]=\"disabled\" (click)=\"onClick_ChooseFile($event)\"\r\n                (keypress)=\"onKeyPress_ChooseFile($event)\" autocomplete=\"off\" />\r\n        </div>\r\n\r\n        <mat-error><span class=\"body-xs\"\r\n                [title]=\"required && src.length == 0 ? ('MESSAGES.ERROR_IS_REQUIRED' | translate: { field: label }) : ('MESSAGES.ERROR_IS_NOT_VALID' | translate: { field: label })\"\r\n                [innerText]=\"required && src.length == 0 ? ('MESSAGES.ERROR_IS_REQUIRED' | translate: { field: label }) : ('MESSAGES.ERROR_IS_NOT_VALID' | translate: { field: label })\"></span>\r\n        </mat-error>\r\n    </mat-form-field>\r\n</ng-template>\r\n\r\n<ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiForm\">\r\n    <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container>\r\n</ng-container>\r\n\r\n<ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiCard\">\r\n    <!-- <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container> -->\r\n</ng-container>\r\n\r\n<ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiTable\">\r\n    <!-- <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container> -->\r\n</ng-container>","import { Observable } from 'rxjs';\r\nimport { Component, OnInit, Injectable, Input, Output, EventEmitter, ViewChild, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { FileUploader } from 'ng2-file-upload';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { FileService, LAYOUT_TYPE, CustomizationService } from '@pepperi-addons/ngx-lib';\r\nimport { DialogService, DialogData, DialogDataType } from '@pepperi-addons/ngx-lib/dialog';\r\n\r\n@Component({\r\n    selector: 'files-uploader',\r\n    templateUrl: './files-uploader.component.html',\r\n    styleUrls: ['./files-uploader.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\n@Injectable()\r\nexport class FilesUploaderComponent implements OnInit {\r\n    @Input() key = '';\r\n    @Input() src = '';\r\n    @Input() label = '';\r\n    @Input() required = false;\r\n    @Input() disabled = false;\r\n    @Input() xAlignment = '0';\r\n    @Input() rowSpan = 1;\r\n    @Input() controlType = '';\r\n    @Input() sizeLimitMB = 5;\r\n\r\n    @Input() form: FormGroup;\r\n    @Input() standAlone = false;\r\n    @Input() acceptedExtensions = 'bmp,jpg,jpeg,png,gif,ico,svg,html,css';\r\n    @Input() layoutType: LAYOUT_TYPE = LAYOUT_TYPE.PepperiForm;\r\n\r\n    @Output() fileChanged: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() elementClicked: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @ViewChild('fileInput') fileInput: any;\r\n    @ViewChild('imagePreview') imagePreview: any;\r\n\r\n    LAYOUT_TYPE = LAYOUT_TYPE;\r\n    fieldHeight = '';\r\n\r\n    // multiple = false;\r\n    uploader: FileUploader;\r\n    progress = 0;\r\n    // response: string;\r\n    intervalID: any = null;\r\n\r\n    constructor(\r\n        private translate: TranslateService,\r\n        private dialogService: DialogService,\r\n        private customizationService: CustomizationService,\r\n        private fileService: FileService)\r\n    {\r\n        const self = this;\r\n        this.uploader = new FileUploader({ removeAfterUpload: true });\r\n\r\n        this.uploader.onAfterAddingFile = (item) => {\r\n            if (self.fileInput?.nativeElement) {\r\n                self.fileInput.nativeElement.value = '';\r\n            }\r\n            const reader = new FileReader();\r\n\r\n            reader.onload = (event: any) => {\r\n                const fileExt = item._file.name.split('.').pop();\r\n                const target = event.target || event.srcElement;\r\n                const fileStr = target.result;\r\n                const errorMsg = self.isValidFile(fileStr, fileExt, self.acceptedExtensions, self.sizeLimitMB);\r\n                if (errorMsg === '') {\r\n                    self.src = fileStr;\r\n                    self.setIntervalX(25, 75);\r\n                    self.setProgress(5);\r\n                    self.fileChanged.emit(\r\n                        JSON.stringify({\r\n                            acceptedExtensions: self.acceptedExtensions,\r\n                            fileStr,\r\n                            fileExt,\r\n                        }));\r\n                }\r\n                else {\r\n                    const title = self.translate.instant('MESSAGES.TITLE_NOTICE');\r\n                    const data = new DialogData({\r\n                        title,\r\n                        content: errorMsg,\r\n                        contentType: DialogDataType.Html});\r\n                    self.dialogService.openDefaultDialog(data);\r\n                }\r\n\r\n            };\r\n            reader.readAsDataURL(item._file);\r\n        };\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.fieldHeight = this.customizationService.calculateFieldHeight(this.layoutType, this.rowSpan, this.standAlone);\r\n\r\n        /*this.uploader.onCompleteAll = () => {\r\n            this.fileInput.nativeElement.value = '';\r\n        }*/\r\n    }\r\n\r\n    isValidFile(fileStr, fileExtension, acceptedExtensions, sizeLimitMB = 5): string {\r\n        const file: any = fileStr;\r\n        let fileSize = 0;\r\n        let content = '';\r\n        // check if got file as Base64\r\n        if (typeof fileStr === 'string' && fileStr.indexOf('data:') > -1) {\r\n            fileSize = this.getBase64FileSize(fileStr);\r\n        } else {\r\n            fileSize = file.size;\r\n        }\r\n        // check the size and the extension\r\n        const sizeOK: boolean = fileSize !== -1 && file != null && fileSize < sizeLimitMB * (1048576);\r\n        const extensionOK = acceptedExtensions === '' || acceptedExtensions.indexOf(fileExtension.toLowerCase()) !== -1;\r\n        if (!extensionOK) {\r\n            content = this.translate.instant('MESSAGES.ERROR_FAILD_TO_LOAD_EXTENSION',\r\n                { fileExtension: '<label class=\\'uppercase bold\\'>' + fileExtension + '</label>' });\r\n        } else if (!sizeOK) {\r\n            content = this.translate.instant('MESSAGES.ERROR_FAILD_TO_LOAD_SIZE',\r\n                { fileSize: '<label class=\\'uppercase bold\\'>' + (sizeLimitMB).toString() + '</label>' });\r\n        }\r\n        return content;\r\n    }\r\n\r\n    getBase64FileSize(base64String: string): number {\r\n        let fileSize: number;\r\n\r\n        try {\r\n            base64String = base64String.substr(base64String.indexOf(',') + 1);\r\n            fileSize = atob(base64String).length;\r\n        } catch (e) {\r\n            fileSize = -1;\r\n        }\r\n\r\n        return fileSize; // return size in bytes;\r\n    }\r\n\r\n    setIntervalX(delay, repetitions): void {\r\n        const self = this;\r\n        let x = 0;\r\n        this.intervalID = window.setInterval(() => {\r\n            // self.setProgress(self.progress + 5);\r\n            if (++x === repetitions || self.uploader.progress >= 100) {\r\n                window.clearInterval(self.intervalID);\r\n            }\r\n        }, delay);\r\n    }\r\n\r\n    errorHandler(event): void {\r\n        event.target.src = this.fileService.getNoImagePath();\r\n        event.target.title = this.translate.instant('IMAGE.NO_IMAGE');\r\n    }\r\n\r\n    private setProgress(progress): void {\r\n        this.progress = progress;\r\n        this.uploader.progress = progress;\r\n    }\r\n\r\n    deleteFile(): void {\r\n        this.uploader.clearQueue();\r\n        window.clearInterval(this.intervalID);\r\n        this.setProgress(0);\r\n\r\n        const value = '';\r\n        this.src = value;\r\n        this.fileChanged.emit(value);\r\n    }\r\n\r\n    onElementClicked(event): void {\r\n        this.elementClicked.emit({ apiName: this.key, event });\r\n    }\r\n\r\n    onClick_ChooseFile(event): void {\r\n        if (this.fileInput?.nativeElement) {\r\n            this.fileInput.nativeElement.click();\r\n        }\r\n    }\r\n\r\n    onKeyPress_ChooseFile(event): void {\r\n        const e = event as KeyboardEvent;\r\n\r\n        if ([13, 32].indexOf(e.which) !== -1) {\r\n            if (this.fileInput?.nativeElement) {\r\n                this.fileInput.nativeElement.click();\r\n            }\r\n        }\r\n        e.preventDefault();\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\n\r\nimport { MatCommonModule } from '@angular/material/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatIconModule } from '@angular/material/icon';\r\n\r\nimport { FileUploadModule } from 'ng2-file-upload';\r\n\r\nimport { PepperiModule } from '@pepperi-addons/ngx-lib';\r\nimport {\r\n    PepperiIconModule,\r\n    PepperiIconRegistry,\r\n    pepperiIconSystemBin,\r\n    pepperiIconSystemAttach,\r\n    pepperiIconSystemFileUploadCloud,\r\n    pepperiIconSystemProcessing\r\n} from '@pepperi-addons/ngx-lib/icon';\r\nimport { PepperiDialogModule } from '@pepperi-addons/ngx-lib/dialog';\r\n\r\nimport { FilesUploaderComponent } from './files-uploader.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        ReactiveFormsModule,\r\n        FormsModule,\r\n        // Material modules,\r\n        MatCommonModule,\r\n        MatButtonModule,\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatIconModule,\r\n        // External modules\r\n        FileUploadModule,\r\n        // Pepperi modules\r\n        PepperiModule,\r\n        PepperiIconModule,\r\n        PepperiDialogModule\r\n    ],\r\n    exports: [FilesUploaderComponent],\r\n    declarations: [FilesUploaderComponent],\r\n})\r\nexport class PepperiFilesUploaderModule {\r\n    constructor(private pepperiIconRegistry: PepperiIconRegistry) {\r\n        this.pepperiIconRegistry.registerIcons([\r\n            pepperiIconSystemBin,\r\n            pepperiIconSystemAttach,\r\n            pepperiIconSystemFileUploadCloud,\r\n            pepperiIconSystemProcessing\r\n        ]);\r\n    }\r\n}\r\n","/*\r\n * Public API Surface of ngx-lib/files-uploader\r\n */\r\nexport * from './files-uploader.module';\r\nexport * from './files-uploader.component';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementContainer","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵproperty","i0.ɵɵstyleProp","i0.ɵɵtext","i0.ɵɵadvance","i0.ɵɵtextInterpolate","i0.ɵɵtemplate","i0.ɵɵtextInterpolate1","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵpropertyInterpolate1"],"mappings":"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"}