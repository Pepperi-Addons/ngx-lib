{"version":3,"file":"pepperi-addons-ngx-lib-signature.js","sources":["../../../projects/ngx-lib/signature/signature.component.html","../../../projects/ngx-lib/signature/signature.component.ts","../../../projects/ngx-lib/signature/signature.module.ts","../../../projects/ngx-lib/signature/public-api.ts","../../../projects/ngx-lib/signature/pepperi-addons-ngx-lib-signature.ts"],"sourcesContent":["<ng-container [formGroup]=\"form\">\r\n    <!-- New code -->\r\n    <ng-container>\r\n        <ng-template #pepperiTemplate>\r\n            <mat-form-field [formGroup]=\"form\" appearance=\"outline\">\r\n                <div class=\"pepperi-file-wrapper\">\r\n                    <div class=\"pepperi-file body-sm\" [ngClass]=\"{ disable: disabled }\" [style.height]=\"fieldHeight\">\r\n                        <ng-container *ngIf=\"src != ''; then withImg; else noImg\"></ng-container>\r\n                        <ng-template #withImg>\r\n                            <button *ngIf=\"!disabled\" mat-button (click)=\"deleteSignature($event)\"\r\n                                class=\"pepperi-button icon-button weak md delete\" tabindex=\"-1\"\r\n                                [ngClass]=\"{ 'right-alignment': xAlignment == '2' }\">\r\n                                <mat-icon>\r\n                                    <pep-icon name=\"system_bin\">\r\n                                    </pep-icon>\r\n                                </mat-icon>\r\n                            </button>\r\n                            <div class=\"pepperi-file-preview\" (click)=\"openSignModal()\">\r\n                                <img [src]=\"src\" [style.max-height]=\"fieldHeight\" class=\"pepperi-file-preview-img\"\r\n                                    (error)=\"errorHandler($event)\" [alt]=\"label\"\r\n                                    [ngClass]=\"['text-align-' + xAlignment]\" />\r\n                            </div>\r\n                        </ng-template>\r\n                        <ng-template #noImg>\r\n                            <div class=\"ellipsis pepperi-file-message\">\r\n                                <pep-icon name=\"system_signature\">\r\n                                </pep-icon>\r\n                                <span class=\"body-sm ellipsis\">\r\n                                    {{ (disabled ? 'MESSAGES.INFO_MISSING_SIGNATURE' : 'SIGNATURE.HINT') | translate }}\r\n                                </span>\r\n                            </div>\r\n                        </ng-template>\r\n                    </div>\r\n                    <input [id]=\"key\" matInput [formControlName]=\"key\" class=\"hidden-input signature\" type=\"text\"\r\n                        [value]=\"src\" [disabled]=\"disabled\" (click)=\"openSignModal()\"\r\n                        (keypress)=\"onKeyPress_OpenSignModal($event)\" autocomplete=\"off\" readonly />\r\n                </div>\r\n\r\n                <mat-error><span class=\"body-xs\"\r\n                        [title]=\"required && src.length == 0 ? ('MESSAGES.ERROR_IS_REQUIRED' | translate: { field: label }) : ('MESSAGES.ERROR_IS_NOT_VALID' | translate: { field: label })\"\r\n                        [innerText]=\"required && src.length == 0 ? ('MESSAGES.ERROR_IS_REQUIRED' | translate: { field: label }) : ('MESSAGES.ERROR_IS_NOT_VALID' | translate: { field: label })\"></span>\r\n                </mat-error>\r\n            </mat-form-field>\r\n        </ng-template>\r\n\r\n        <ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiForm\">\r\n            <div class=\"pepperi-file-container\" [ngClass]=\"{ 'one-row': rowSpan == 1, 'stand-alone': standAlone}\">\r\n                <pep-field-title [label]=\"label\" [required]=\"required\" [disabled]=\"disabled\" [xAlignment]=\"xAlignment\"\r\n                    [showTitle]=\"showTitle\">\r\n                </pep-field-title>\r\n                <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container>\r\n            </div>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiCard\">\r\n            <ng-container *ngIf=\"false && isActive && !disabled; then selectedBlock; else notSelectedBlock\">\r\n            </ng-container>\r\n            <ng-template #selectedBlock>\r\n                <div class=\"pepperi-file-container\" [ngClass]=\"{ 'one-row': rowSpan == 1}\">\r\n                    <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template #notSelectedBlock>\r\n                <div class=\"pepperi-file-container\" [ngClass]=\"{ 'one-row': rowSpan == 1 }\">\r\n                    <ng-container *ngTemplateOutlet=\"pepperiReadonlyTemplate; context: { isTableView: false}\">\r\n                    </ng-container>\r\n                </div>\r\n            </ng-template>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiTable\">\r\n            <ng-container *ngIf=\"false && isActive && !disabled; then selectedBlock; else notSelectedBlock\">\r\n            </ng-container>\r\n            <ng-template #selectedBlock>\r\n                <div class=\"pepperi-file-container one-row\">\r\n                    <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template #notSelectedBlock>\r\n                <div class=\"pepperi-file-container one-row\">\r\n                    <ng-container *ngTemplateOutlet=\"pepperiReadonlyTemplate; context: { isTableView: true}\">\r\n                    </ng-container>\r\n                </div>\r\n            </ng-template>\r\n        </ng-container>\r\n    </ng-container>\r\n\r\n    <!-- <ng-container *ngIf=\"inDialog === true\">\r\n        <ng-container *ngTemplateOutlet=\"signaturePopupPad\"></ng-container>\r\n    </ng-container> -->\r\n\r\n    <!-- <div *ngIf=\"inDialog === false\" class=\"signature-backdrop modal\" [ngClass]=\"{ fade: !isVisibleModal }\" tabindex=\"-1\"\r\n        role=\"dialog\" aria-labelledby=\"gridModalLabel\" aria-hidden=\"true\"\r\n        [ngStyle]=\"{ display: isVisibleModal ? 'block' : 'none' }\">\r\n        <div class=\"signature-modal modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <ng-container *ngTemplateOutlet=\"signaturePopupPad\"></ng-container>\r\n            </div>\r\n        </div>\r\n    </div> -->\r\n\r\n    <ng-template #pepperiReadonlyTemplate let-isTableView=\"isTableView\">\r\n        <div class=\"pepperi-file-container\">\r\n            <div class=\"pepperi-file-wrapper\">\r\n                <div class=\"pepperi-file body-sm disable\">\r\n                    <ng-container *ngIf=\"src != ''; then withImg; else noImg\"></ng-container>\r\n                    <ng-template #withImg>\r\n                        <div class=\"pepperi-file-preview\" (click)=\"openSignModal()\">\r\n                            <img *ngIf=\"!isTableView\" [src]=\"src\" [style.max-height]=\"fieldHeight\"\r\n                                class=\"pepperi-file-preview-img\" (error)=\"errorHandler($event)\" [alt]=\"label\"\r\n                                [ngClass]=\"['text-align-' + xAlignment]\" />\r\n                            <img *ngIf=\"isTableView\" [src]=\"src\" [style.max-height]=\"fieldHeight\"\r\n                                class=\"pepperi-report-file pepperi-file-preview-img\" (error)=\"errorHandler($event)\"\r\n                                [alt]=\"label\" [ngClass]=\"['text-align-' + xAlignment]\" />\r\n                        </div>\r\n                    </ng-template>\r\n                    <ng-template #noImg></ng-template>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n\r\n    <ng-template #signaturePopupPad>\r\n        <h2 mat-dialog-title class=\"pepperi-border-bottom\">\r\n            <span class=\"pull-left flip ellipsis\">{{ 'SIGNATURE.DIALOG_TITLE' | translate }}</span>\r\n            <button mat-button [mat-dialog-close]=\"null\" class=\"pepperi-button icon-button md weak pull-right flip\">\r\n                <mat-icon>\r\n                    <pep-icon name=\"system_close\">\r\n                    </pep-icon>\r\n                </mat-icon>\r\n            </button>\r\n        </h2>\r\n        <div mat-dialog-content>\r\n            <signature-pad #signaturePad [options]=\"signaturePadOptions\" (onBeginEvent)=\"drawStart()\"\r\n                (onEndEvent)=\"drawComplete()\">\r\n            </signature-pad>\r\n        </div>\r\n        <div mat-dialog-actions *ngIf=\"showActionBtn\" class=\" pepperi-border-top\">\r\n            <div class=\"spacing-element-negative\">\r\n                <button mat-button class=\"spacing-element pepperi-button md strong pull-right flip\"\r\n                    [disabled]=\"!showActionBtn || readonly || disabled\" (click)=\"saveSignModal($event)\"\r\n                    [mat-dialog-close]=\"signatureURL\">\r\n                    {{ 'ACTIONS.DONE' | translate }}\r\n                </button>\r\n                <button mat-button class=\"spacing-element pepperi-button md weak pull-right flip\"\r\n                    [disabled]=\"!showActionBtn || readonly || disabled\" (click)=\"clearSignModal()\">\r\n                    {{ 'ACTIONS.CLEAR' | translate }}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n\r\n</ng-container>","import {\r\n    Component, OnInit, OnDestroy, ViewChild, Input, Output, EventEmitter, ChangeDetectorRef,\r\n    ChangeDetectionStrategy, OnChanges, ElementRef, Renderer2, TemplateRef\r\n} from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { SignaturePad } from 'angular2-signaturepad/signature-pad';\r\nimport { FileService, LAYOUT_TYPE, CustomizationService } from '@pepperi-addons/ngx-lib';\r\nimport { DialogService } from '@pepperi-addons/ngx-lib/dialog';\r\n\r\n@Component({\r\n    selector: 'pep-signature',\r\n    styleUrls: ['./signature.component.scss'],\r\n    templateUrl: './signature.component.html',\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class PepperiSignatureComponent implements OnInit, OnChanges, OnDestroy {\r\n    @Input() key = '';\r\n    @Input() src = '';\r\n    @Input() label = '';\r\n    @Input() required = false;\r\n    @Input() disabled = false;\r\n    @Input() readonly = false;\r\n    @Input() xAlignment = '0';\r\n    @Input() rowSpan = 1;\r\n    @Input() signatureURL = '';\r\n    // @Input() inDialog = false;\r\n\r\n    controlType = 'signature';\r\n\r\n    @Input() form: FormGroup = null;\r\n    @Input() showTitle = true;\r\n    @Input() layoutType: LAYOUT_TYPE = LAYOUT_TYPE.PepperiForm;\r\n    @Input() isActive = false;\r\n\r\n    @Output() valueChanged: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @ViewChild('signaturePad') signaturePad: SignaturePad;\r\n    @ViewChild('signaturePopupPad', { read: TemplateRef }) signaturePopupPad: TemplateRef<any>;\r\n\r\n    LAYOUT_TYPE = LAYOUT_TYPE;\r\n    fieldHeight = '';\r\n    standAlone = false;\r\n    dataURI = null;\r\n    showActionBtn = true;\r\n\r\n    public isVisibleModal = false;\r\n    acceptSignatureType = 'png';\r\n\r\n    public signaturePadOptions: any = {\r\n        // passed through to szimek/signature_pad constructor\r\n        minWidth: 2,\r\n        canvasWidth: 500,\r\n        canvasHeight: 300,\r\n        penColor: 'rgb(151, 151, 151)'\r\n    };\r\n\r\n    constructor(\r\n        private dialogService: DialogService,\r\n        private customizationService: CustomizationService,\r\n        private fileService: FileService,\r\n        private cd: ChangeDetectorRef,\r\n        private renderer: Renderer2,\r\n        private element: ElementRef) {\r\n\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.form === null) {\r\n            this.standAlone = true;\r\n            this.form = this.customizationService.getDefaultFromGroup(this.key, this.src, this.required, this.readonly, this.disabled);\r\n\r\n            this.renderer.addClass(this.element.nativeElement, CustomizationService.STAND_ALONE_FIELD_CLASS_NAME);\r\n        }\r\n\r\n        this.fieldHeight = this.customizationService.calculateFieldHeight(this.layoutType, this.rowSpan, this.standAlone);\r\n    }\r\n\r\n    ngOnChanges(changes: any): void {\r\n        if (changes.src && changes.src.currentValue.length > 0) {\r\n            // Empty dataURI if there is change in the src.\r\n            this.dataURI = null;\r\n\r\n            // For clean the cache.\r\n            // this.src = this.src ? this.src + '?t=' + new Date().toTimeString() : '';\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.valueChanged) {\r\n            this.valueChanged.unsubscribe();\r\n        }\r\n    }\r\n\r\n    drawComplete(): void {\r\n        // will be notified of szimek/signature_pad's onEnd event\r\n    }\r\n\r\n    drawStart(): void {\r\n        // will be notified of szimek/signature_pad's onBegin event\r\n    }\r\n\r\n    openSignModal(): void {\r\n        // If the signature is not empty open it in image viewer.\r\n        if (this.standAlone && this.dataURI) {\r\n            const fileStrArr = this.dataURI.fileStr.split(';');\r\n\r\n            if (fileStrArr.length === 2) {\r\n                const win = window.open('', '_blank');\r\n                const contentType = fileStrArr[0].split(':')[1];\r\n                const base64 = fileStrArr[1].split(',')[1];\r\n                const blob = this.fileService.convertFromb64toBlob(base64, contentType);\r\n                const url = URL.createObjectURL(blob);\r\n                win.location.href = url;\r\n            }\r\n            // signature allready exits\r\n        } else {\r\n            this.signatureURL = this.src;\r\n            this.openSignatoreDlg(this.signatureURL);\r\n        }\r\n    }\r\n    openSignatoreDlg(src: string = ''): void {\r\n        this.showActionBtn = this.signatureURL && this.signatureURL !== '' ? false : true;\r\n        // const signatureData = new DialogData('', this.signaturePopupPad, DialogDataType.Template);\r\n\r\n        const dialogRef = this.dialogService.openDialog(this.signaturePopupPad);\r\n        dialogRef.afterOpened().subscribe(() => {\r\n            this.afterDialogOpened();\r\n        });\r\n    }\r\n\r\n    afterDialogOpened(): void {\r\n        if (this.signatureURL && this.signatureURL !== '') {\r\n            this.signaturePad.fromDataURL(this.signatureURL);\r\n            this.signaturePad.off();\r\n        }\r\n    }\r\n\r\n    clearSignModal(): void {\r\n        this.signatureURL = '';\r\n        this.signaturePad.clear();\r\n        this.signaturePad.on();\r\n    }\r\n\r\n    deleteSignature(event: any): void {\r\n        this.signatureURL = '';\r\n        this.changeValue(this.signatureURL);\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    saveSignModal(event: any): void {\r\n        if (!this.signaturePad.isEmpty()) {\r\n            this.signatureURL = this.signaturePad.toDataURL('image/png');\r\n            const fileValue = JSON.stringify({\r\n                acceptedExtensions: this.acceptSignatureType,\r\n                fileStr: this.signatureURL,\r\n                fileExt: this.acceptSignatureType\r\n            });\r\n            this.changeValue(fileValue);\r\n        } else {\r\n            this.signatureURL = '';\r\n            this.changeValue(this.signatureURL);\r\n        }\r\n    }\r\n\r\n    errorHandler(event: any): void {\r\n        this.signatureURL = this.src = ''; // this.blankImage;\r\n    }\r\n\r\n    changeValue(value: any, lastFocusedField: any = null): void {\r\n        this.dataURI = value.length > 0 ? JSON.parse(value) : null;\r\n        this.src = this.standAlone && this.dataURI ? this.dataURI.fileStr : '';\r\n        this.customizationService.updateFormFieldValue(this.form, this.key, this.dataURI ? this.dataURI.fileExt : '');\r\n        this.valueChanged.emit({ apiName: this.key, value, controlType: this.controlType, lastFocusedField });\r\n    }\r\n\r\n    onKeyPress_OpenSignModal(event: any): void {\r\n        const e = event as KeyboardEvent;\r\n\r\n        if ([13, 32].indexOf(e.which) !== -1) {\r\n            this.openSignModal();\r\n        }\r\n        e.preventDefault();\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\n\r\nimport { MatCommonModule } from '@angular/material/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\n\r\nimport { SignaturePadModule } from 'angular2-signaturepad';\r\n\r\nimport { PepperiModule } from '@pepperi-addons/ngx-lib';\r\nimport {\r\n    PepperiIconModule,\r\n    PepperiIconRegistry,\r\n    pepperiIconSystemBin,\r\n    pepperiIconSystemSignature,\r\n    pepperiIconSystemClose\r\n} from '@pepperi-addons/ngx-lib/icon';\r\nimport { PepperiFieldTitleModule } from '@pepperi-addons/ngx-lib/field-title';\r\nimport { PepperiFilesUploaderModule } from '@pepperi-addons/ngx-lib/files-uploader';\r\nimport { PepperiDialogModule } from '@pepperi-addons/ngx-lib/dialog';\r\n\r\nimport { PepperiSignatureComponent } from './signature.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        ReactiveFormsModule,\r\n        FormsModule,\r\n        // Material modules\r\n        MatCommonModule,\r\n        MatButtonModule,\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatIconModule,\r\n        MatDialogModule,\r\n        // External modules\r\n        SignaturePadModule,\r\n        // Pepperi modules\r\n        PepperiModule,\r\n        PepperiIconModule,\r\n        PepperiFieldTitleModule,\r\n        PepperiFilesUploaderModule,\r\n        PepperiDialogModule\r\n    ],\r\n    exports: [ PepperiSignatureComponent ],\r\n    declarations: [ PepperiSignatureComponent ],\r\n})\r\nexport class PepperiSignatureModule {\r\n    constructor(private pepperiIconRegistry: PepperiIconRegistry) {\r\n        this.pepperiIconRegistry.registerIcons([\r\n            pepperiIconSystemBin,\r\n            pepperiIconSystemSignature,\r\n            pepperiIconSystemClose\r\n        ]);\r\n    }\r\n}\r\n","/*\r\n * Public API Surface of ngx-lib/signature\r\n */\r\nexport * from './signature.module';\r\nexport * from './signature.component';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementContainer","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelement","i0.ɵɵelementEnd","i0.ɵɵproperty","i0.ɵɵtemplate","i0.ɵɵadvance","i0.ɵɵstyleProp","i0.ɵɵtext","i0.ɵɵtextInterpolate1","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵtextInterpolate"],"mappings":"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"}