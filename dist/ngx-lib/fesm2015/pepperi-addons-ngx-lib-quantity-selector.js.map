{"version":3,"file":"pepperi-addons-ngx-lib-quantity-selector.js","sources":["../../../projects/ngx-lib/quantity-selector/quantity-selector.pipes.ts","../../../projects/ngx-lib/quantity-selector/quantity-selector.component.html","../../../projects/ngx-lib/quantity-selector/quantity-selector.component.ts","../../../projects/ngx-lib/quantity-selector/quantity-selector.module.ts","../../../projects/ngx-lib/quantity-selector/public-api.ts","../../../projects/ngx-lib/quantity-selector/pepperi-addons-ngx-lib-quantity-selector.ts"],"sourcesContent":["import {Pipe, PipeTransform} from '@angular/core';\r\n\r\n@Pipe({ name: 'quantitySelectorNumber' })\r\nexport class QuantitySelectorNumber implements PipeTransform {\r\n\r\n    transform(value: string, allowDecimal: boolean): string {\r\n\r\n        const tmpValue = parseFloat(value);\r\n\r\n        if (tmpValue === 0) {\r\n            return '0';\r\n        }\r\n        else if (allowDecimal) {\r\n            return tmpValue.toString();\r\n        }\r\n        else {\r\n            return parseInt(value).toString();\r\n        }\r\n    }\r\n}","<ng-container [formGroup]=\"form\">\r\n    <!-- New code -->\r\n    <ng-template #pepperiTemplate>\r\n        <div #QSCont class=\"pepperi-quantity-selector-container {{ styleClass }}\" [ngClass]=\"{\r\n                'pepperi-table-quantity-selector': layoutType === LAYOUT_TYPE.PepperiTable,\r\n                'one-row': rowSpan === 1,\r\n                caution: isCaution,\r\n                'matrix-qs': type === 'qsForMatrix',\r\n                'zero-quantity': formattedValue === '0'\r\n            }\">\r\n            <pep-field-title *ngIf=\"layoutType !== LAYOUT_TYPE.PepperiTable && layoutType !== LAYOUT_TYPE.PepperiCard\"\r\n                [label]=\"label\" [required]=\"required\" [disabled]=\"disabled\" [showTitle]=\"showTitle\"\r\n                [xAlignment]=\"xAlignment\">\r\n            </pep-field-title>\r\n\r\n            <ng-container *ngIf=\"type == 'qs'\">\r\n                <ng-container *ngIf=\"readonly; then readonlyBlock; else editableQSBlock\"></ng-container>\r\n                <ng-template #readonlyBlock>\r\n                    <button [id]=\"key\" mat-button class=\"pepperi-button {{ styleClass }} ellipsis\"\r\n                        [ngClass]=\"{caution: isCaution, md: rowSpan !== 1, xs: rowSpan === 1}\"\r\n                        title=\"{{ formattedValue }}\" disabled=\"true\">\r\n                        {{ formattedValue }}\r\n                    </button>\r\n                </ng-template>\r\n                <ng-template #editableQSBlock>\r\n                    <mat-form-field appearance=\"outline\">\r\n                        <input type=\"decimalNumber\" inputmode=\"decimal\" matInput #QSInput name=\"{{ key }}\"\r\n                            class=\"body-lg ellipsis\" title=\"{{ formattedValue }}\" autocomplete=\"off\" [id]=\"key\"\r\n                            [formControlName]=\"key\"\r\n                            [value]=\"isFocus ? (value | quantitySelectorNumber: alowDecimal) : formattedValue\"\r\n                            [disabled]=\"disabled\" (keypress)=\"onKeyPress($event)\"\r\n                            (click)=\"$event.target.setSelectionRange(0, 999)\" (blur)=\"onBlur($event)\"\r\n                            (focus)=\"onFocus($event)\" />\r\n                        <button *ngIf=\"showQsBtn\" mat-button matPrefix (click)=\"decrement($event)\"\r\n                            class=\"pepperi-button icon-button sm weak qs-action\"\r\n                            [ngClass]=\"{caution: isCaution && styleClass !== STYLE_TYPE.Strong, 'keep-background-on-focus': styleClass === STYLE_TYPE.Strong}\">\r\n                            <mat-icon>\r\n                                <pep-icon name=\"number_minus\">\r\n                                </pep-icon>\r\n                                <!-- <svg [pepSvgIcon]=\"'number-minus'\"></svg> -->\r\n                            </mat-icon>\r\n                        </button>\r\n                        <button *ngIf=\"showQsBtn\" mat-button matSuffix (click)=\"increment($event)\"\r\n                            class=\"pepperi-button icon-button sm weak qs-action\"\r\n                            [ngClass]=\"{caution: isCaution && styleClass !== STYLE_TYPE.Strong, 'keep-background-on-focus': styleClass === STYLE_TYPE.Strong}\">\r\n                            <mat-icon>\r\n                                <pep-icon name=\"number_plus\">\r\n                                </pep-icon>\r\n                                <!-- <svg [pepSvgIcon]=\"'number-plus'\"></svg> -->\r\n                            </mat-icon>\r\n                        </button>\r\n                        <mat-error *ngIf=\"messages?.length > 0\">\r\n                            <span class=\"qs-error body-xs\" *ngFor=\"let msg of messages\"> {{ msg.Key | translate }} :\r\n                                {{ msg.Value }} </span>\r\n                        </mat-error>\r\n                    </mat-form-field>\r\n                </ng-template>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"type == 'qsForMatrix'\">\r\n                <ng-container *ngIf=\"readonly; then readonlyBlock; else editableQSBlock\"></ng-container>\r\n                <ng-template #readonlyBlock>\r\n                    <button [id]=\"key\" mat-button class=\"pepperi-button {{ styleClass }} disabled\" disabled=\"true\"\r\n                        [ngClass]=\"{caution: isCaution, md: rowSpan !== 1, xs: rowSpan === 1}\">\r\n                        X\r\n                    </button>\r\n                </ng-template>\r\n                <ng-template #editableQSBlock>\r\n                    <!-- <span class=\"body-sm additional-value pull-left flip\" [ngClass]=\"xAlignment == '2' ? 'prefix' : 'suffix'\" matBadge=\"{{ additionalValue }}\" matBadgePosition=\"before\"\r\n                        matBadgeSize=\"rowSpan === 1 ? small : medium\" [@showHide]=\"getAdditionalValue\"></span> -->\r\n\r\n                    <span *ngIf=\"xAlignment == '2'\" class=\"body-sm additional-value prefix\"\r\n                        matBadge=\"{{ additionalValue }}\" matBadgePosition=\"before\"\r\n                        matBadgeSize=\"rowSpan === 1 ? small : medium\" [@showHide]=\"getAdditionalValue\"></span>\r\n\r\n                    <mat-form-field appearance=\"outline\" (mouseleave)=\"!isFocus ? onMatrixMouseleave($event) : null\">\r\n                        <input type=\"decimalNumber\" inputmode=\"decimal\" matInput #QSInput name=\"{{ key }}\"\r\n                            title=\"{{ formattedValue }}\" class=\"body-sm ellipsis\" autocomplete=\"off\" [id]=\"key\"\r\n                            [formControlName]=\"key\"\r\n                            [value]=\"isFocus ? (value | quantitySelectorNumber: alowDecimal) : formattedValue\"\r\n                            [disabled]=\"disabled\" (keypress)=\"onKeyPress($event)\"\r\n                            (click)=\"onMatrixClick($event); $event.target.setSelectionRange(0, 999)\"\r\n                            (blur)=\"onMatrixBlur($event)\" (focus)=\"onMatrixMouseEnter($event); onFocus($event)\"\r\n                            (mouseenter)=\"onMatrixMouseEnter($event)\" />\r\n\r\n                        <!-- <span matPrefix *ngIf=\"xAlignment == '2'\" class=\"body-sm additional-value prefix\" matBadge=\"{{ additionalValue }}\" matBadgePosition=\"before\"\r\n                            matBadgeSize=\"rowSpan === 1 ? small : medium\" [@showHide]=\"getAdditionalValue\"></span>\r\n                        <span matSuffix *ngIf=\"xAlignment != '2'\" class=\"body-sm additional-value suffix\" matBadge=\"{{ additionalValue }}\" matBadgePosition=\"before\"\r\n                            matBadgeSize=\"rowSpan === 1 ? small : medium\" [@showHide]=\"getAdditionalValue\"></span> -->\r\n\r\n                        <mat-error *ngIf=\"messages?.length > 0\">\r\n                            <span class=\"qs-error body-xs\" *ngFor=\"let msg of messages\"> {{ msg.Key | translate }} :\r\n                                {{ msg.Value }} </span>\r\n                        </mat-error>\r\n                    </mat-form-field>\r\n\r\n                    <span *ngIf=\"xAlignment != '2'\" class=\"body-sm additional-value suffix\"\r\n                        matBadge=\"{{ additionalValue }}\" matBadgePosition=\"before\"\r\n                        matBadgeSize=\"rowSpan === 1 ? small : medium\" [@showHide]=\"getAdditionalValue\"></span>\r\n                </ng-template>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"type == 'button'\">\r\n                <ng-container *ngIf=\"value == '0'; then regularBlock; else withBadgeBlock\"></ng-container>\r\n                <ng-template #regularBlock>\r\n                    <button mat-button name=\"{{ key }}\" class=\"pepperi-button {{ styleClass }} ellipsis\" [id]=\"key\"\r\n                        [ngClass]=\"{caution: isCaution, md: rowSpan !== 1, xs: rowSpan === 1}\"\r\n                        [title]=\"'QS.ORDER' | translate\" (click)=\"enterChildren($event)\">\r\n                        {{ 'QS.ORDER' | translate }}\r\n                    </button>\r\n                </ng-template>\r\n                <ng-template #withBadgeBlock>\r\n                    <ng-container *ngIf=\"xAlignment == '2'; then leftBadgeBlock; else rightBadgeBlock\">\r\n                    </ng-container>\r\n                    <ng-template #leftBadgeBlock>\r\n                        <button mat-button matBadge=\"{{ formattedValue }}\" matBadgePosition=\"before\"\r\n                            [matBadgeSize]=\"layoutType === LAYOUT_TYPE.PepperiCard && rowSpan === 1 ? 'small' : 'medium'\"\r\n                            name=\"{{ key }}\" class=\"pepperi-button {{ styleClass }} ellipsis right-alignment\" [id]=\"key\"\r\n                            [ngClass]=\"{caution: isCaution, md: rowSpan !== 1, xs: rowSpan === 1}\"\r\n                            [title]=\"'QS.ORDER' | translate\" (click)=\"enterChildren($event)\">\r\n                            {{ 'QS.ORDER' | translate }}\r\n                        </button>\r\n                    </ng-template>\r\n                    <ng-template #rightBadgeBlock>\r\n                        <button mat-button matBadge=\"{{ formattedValue }}\" matBadgePosition=\"after\"\r\n                            [matBadgeSize]=\"layoutType === LAYOUT_TYPE.PepperiCard && rowSpan === 1 ? 'small' : 'medium'\"\r\n                            name=\"{{ key }}\" class=\"pepperi-button {{ styleClass }} ellipsis left-alignment\" [id]=\"key\"\r\n                            [ngClass]=\"{caution: isCaution, md: rowSpan !== 1, xs: rowSpan === 1}\"\r\n                            [title]=\"'QS.ORDER' | translate\" (click)=\"enterChildren($event)\">\r\n                            {{ 'QS.ORDER' | translate }}\r\n                        </button>\r\n                    </ng-template>\r\n                </ng-template>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"type == 'packageButton'\">\r\n                <button mat-button name=\"{{ key }}\" title=\"{{ 'QS.ORDER' | translate }}\"\r\n                    class=\"pepperi-button {{ styleClass }} ellipsis\" [id]=\"key\"\r\n                    [ngClass]=\"{caution: isCaution, md: rowSpan !== 1, xs: rowSpan === 1}\"\r\n                    (click)=\"enterPackage($event)\">\r\n                    {{ 'QS.ORDER' | translate }} &#40;{{ formattedValue }}&#41;\r\n                </button>\r\n            </ng-container>\r\n        </div>\r\n    </ng-template>\r\n\r\n    <ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiForm\">\r\n        <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiCard\">\r\n        <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"layoutType === LAYOUT_TYPE.PepperiTable\">\r\n        <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"layoutType === LAYOUT_TYPE.Editmodal\">\r\n        <ng-container *ngTemplateOutlet=\"pepperiTemplate\"></ng-container>\r\n    </ng-container>\r\n</ng-container>","import {\r\n    Component,\r\n    OnInit,\r\n    OnChanges,\r\n    OnDestroy,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    ViewChild,\r\n    ElementRef,\r\n    ChangeDetectorRef,\r\n    ChangeDetectionStrategy,\r\n    Renderer2,\r\n    AfterViewChecked,\r\n} from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { trigger, state, style, animate, transition } from '@angular/animations';\r\nimport { LAYOUT_TYPE, STYLE_TYPE, CustomizationService } from '@pepperi-addons/ngx-lib';\r\n\r\nimport * as $ from 'jquery';\r\n\r\n@Component({\r\n    selector: 'pep-quantity-selector',\r\n    templateUrl: './quantity-selector.component.html',\r\n    styleUrls: ['./quantity-selector.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    animations: [\r\n        trigger('showHide', [\r\n            state(\r\n                'show',\r\n                style({\r\n                    opacity: 1,\r\n                    transform: 'scale(1)',\r\n                })\r\n            ),\r\n            state(\r\n                'hide',\r\n                style({\r\n                    opacity: 0,\r\n                    transform: 'scale(0)',\r\n                })\r\n            ),\r\n            transition('show => hide', animate('250ms ease-out')),\r\n            transition('hide => show', animate('250ms ease-in')),\r\n        ]),\r\n    ],\r\n})\r\nexport class PepperiQuantitySelectorComponent implements OnChanges, OnInit, AfterViewChecked, OnDestroy {\r\n    public static ENTER_CHILDREN = '[EnterChildren]';\r\n    public static ENTER_PACKAGE = '[EnterPackage]';\r\n\r\n    @Input() key = '';\r\n    @Input() value = '';\r\n    @Input() formattedValue = '';\r\n    @Input() label = '';\r\n    @Input() type = 'qs';\r\n    @Input() required = false;\r\n    @Input() disabled = false;\r\n    @Input() readonly = false;\r\n    @Input() textColor = '';\r\n    @Input() xAlignment = '0';\r\n    @Input() rowSpan = 1;\r\n    @Input() lastFocusField: any;\r\n    @Input() alowDecimal = false;\r\n    @Input() additionalValue = '';\r\n    @Input() notificationInfo: any;\r\n\r\n    controlType = 'qs';\r\n\r\n    @Input() form: FormGroup = null;\r\n    @Input() showTitle = true;\r\n    @Input() layoutType: LAYOUT_TYPE = LAYOUT_TYPE.PepperiForm;\r\n    @Input() isActive = false;\r\n\r\n    @Output() valueChanged: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() elementClicked: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @ViewChild('QSCont') QSCont: ElementRef;\r\n    @ViewChild('QSInput') QSInput: ElementRef;\r\n\r\n    LAYOUT_TYPE = LAYOUT_TYPE;\r\n    standAlone = false;\r\n    isFocus = false;\r\n    isMatrixFocus = false;\r\n\r\n    isCaution = false;\r\n    messages: Array<any> = null;\r\n    showQsBtn = false;\r\n    resize: any;\r\n\r\n    sameElementInTheWantedRow = null;\r\n    STYLE_TYPE = STYLE_TYPE;\r\n    styleClass = STYLE_TYPE.Strong;\r\n    isEmptyKey = false;\r\n\r\n    constructor(\r\n        private cd: ChangeDetectorRef,\r\n        private customizationService: CustomizationService,\r\n        private renderer: Renderer2,\r\n        private element: ElementRef\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        if (this.form === null) {\r\n            if (this.key === '') {\r\n                this.isEmptyKey = true;\r\n            }\r\n\r\n            this.standAlone = true;\r\n            this.form = this.customizationService.getDefaultFromGroup(this.key, this.value, this.required, this.readonly, this.disabled);\r\n            this.formattedValue = this.formattedValue || this.value;\r\n\r\n            this.renderer.addClass(this.element.nativeElement, CustomizationService.STAND_ALONE_FIELD_CLASS_NAME);\r\n        }\r\n\r\n        this.setQsView();\r\n        // TODO:\r\n        // const self = this;\r\n        // this.resize = Observable.fromEvent(window, 'resize')\r\n        //     .debounceTime(100)\r\n        //     .subscribe((event) => {\r\n        //         self.setQsView();\r\n        //     });\r\n    }\r\n\r\n    // TODO:\r\n    ngAfterViewChecked(): void {\r\n        setTimeout(() => {\r\n            this.setQsView();\r\n        }, 125);\r\n    }\r\n\r\n    ngOnChanges(changes: any): void {\r\n        // Bug fix for addons when the key is '' in the ngOnInit for some reson\r\n        if (this.isEmptyKey && this.key !== '') {\r\n            this.form = this.customizationService.getDefaultFromGroup(this.key, this.value, this.required, this.readonly, this.disabled);\r\n        }\r\n\r\n        this.isCaution = this.textColor === '#FF0000';\r\n\r\n        const messages = this.notificationInfo && this.notificationInfo.length > 0 ? JSON.parse(this.notificationInfo).Messages : '';\r\n        if (messages && messages.length > 0) {\r\n            // Replace the msg keys.\r\n            for (const msg of messages) {\r\n                if (msg.Key === 'Inventory_Limit_Msg') {\r\n                    msg.Key = 'MESSAGES.ERROR_INVENTORY_LIMIT';\r\n                } else if (msg.Key === 'Case_Quantity_Limit_Msg') {\r\n                    msg.Key = 'MESSAGES.ERROR_CASE_QUANTITY_LIMIT';\r\n                } else if (msg.Key === 'Min_Quantity_Limit_Msg') {\r\n                    msg.Key = 'MESSAGES.ERROR_MIN_QUANTITY_LIMIT';\r\n                } else if (msg.Key === 'Max_Quantity_Limit_Msg') {\r\n                    msg.Key = 'MESSAGES.ERROR_MAX_QUANTITY_LIMIT';\r\n                }\r\n            }\r\n\r\n            this.messages = messages;\r\n\r\n            const fieldControl = this.form.controls[this.key];\r\n            fieldControl.setErrors({\r\n                serverError: 'Error',\r\n            });\r\n            setTimeout(() => {\r\n                if (this.QSInput && this.QSInput.nativeElement) {\r\n                    this.QSInput.nativeElement.focus();\r\n                }\r\n            }, 150);\r\n        } else {\r\n            const self = this;\r\n            setTimeout(() => {\r\n                if (self.lastFocusField) {\r\n                    self.lastFocusField.focus();\r\n                    self.lastFocusField = null;\r\n                } else {\r\n                    self.focusToTheSameElementInTheWantedRow();\r\n                }\r\n            }, 100);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.resize) {\r\n            this.resize.unsubscribe();\r\n        }\r\n\r\n        if (this.valueChanged) {\r\n            this.valueChanged.unsubscribe();\r\n        }\r\n\r\n        if (this.elementClicked) {\r\n            this.elementClicked.unsubscribe();\r\n        }\r\n    }\r\n\r\n    get getAdditionalValue(): string {\r\n        return this.additionalValue.length > 0 ? 'show' : 'hide';\r\n    }\r\n\r\n    getSameElementInTheWantedRowByClassName(event: any, isNext = true): any {\r\n        const eventTarget = event.target || event.srcElement;\r\n        let sameElementInTheWantedRowByClassName;\r\n\r\n        let parentSelector;\r\n        if (this.layoutType === LAYOUT_TYPE.PepperiTable) {\r\n            parentSelector = sameElementInTheWantedRowByClassName = $(eventTarget).parents('.table-row');\r\n        } else if (this.layoutType === LAYOUT_TYPE.PepperiCard) {\r\n            parentSelector = sameElementInTheWantedRowByClassName = $(eventTarget).parents('.card-view');\r\n\r\n            if (parentSelector.length === 0) {\r\n                parentSelector = sameElementInTheWantedRowByClassName = $(eventTarget).parents('.line-view');\r\n            }\r\n        }\r\n\r\n        if (isNext) {\r\n            if (parentSelector.is(':last-child')) {\r\n                sameElementInTheWantedRowByClassName = parentSelector\r\n                    .parent()\r\n                    .children()\r\n                    .first()\r\n                    .find('[name=' + this.key + ']');\r\n            } else {\r\n                sameElementInTheWantedRowByClassName = parentSelector.next().find('[name=' + this.key + ']');\r\n            }\r\n        } else {\r\n            if (parentSelector.is(':first-child')) {\r\n                sameElementInTheWantedRowByClassName = parentSelector\r\n                    .parent()\r\n                    .children()\r\n                    .last()\r\n                    .find('[name=' + this.key + ']');\r\n            } else {\r\n                sameElementInTheWantedRowByClassName = parentSelector.prev().find('[name=' + this.key + ']');\r\n            }\r\n        }\r\n\r\n        return sameElementInTheWantedRowByClassName;\r\n    }\r\n\r\n    setSameElementInTheWantedRow(event: any, isNext = true): void {\r\n        // Navigate to the QS in the next row.\r\n        // const target = event.target || event.srcElement;\r\n        this.sameElementInTheWantedRow = this.getSameElementInTheWantedRowByClassName(event, isNext);\r\n        this.QSInput.nativeElement.blur();\r\n    }\r\n\r\n    focusToTheSameElementInTheWantedRow(): void {\r\n        if (this.sameElementInTheWantedRow) {\r\n            // If this is regular item (qs and not button) .\r\n            if (this.sameElementInTheWantedRow.is('input')) {\r\n                this.sameElementInTheWantedRow.click().select();\r\n            } else {\r\n                this.sameElementInTheWantedRow.parent().click();\r\n                this.sameElementInTheWantedRow.focus();\r\n            }\r\n            this.sameElementInTheWantedRow = null;\r\n        }\r\n    }\r\n\r\n    cleanError(): void {\r\n        const fieldControl = this.form.controls[this.key];\r\n\r\n        // Clean the error message\r\n        if (this.messages && this.messages.length > 0) {\r\n            this.messages = this.notificationInfo = null;\r\n            fieldControl.setErrors(null);\r\n        }\r\n    }\r\n\r\n    onMatrixMouseEnter(event: any): void {\r\n        this.isMatrixFocus = true;\r\n    }\r\n\r\n    onMatrixMouseleave(event: any): void {\r\n        this.isMatrixFocus = false;\r\n    }\r\n\r\n    onMatrixClick(event: any): void {\r\n        this.isFocus = true;\r\n\r\n        if (this.QSInput && this.QSInput.nativeElement) {\r\n            this.QSInput.nativeElement.focus();\r\n        }\r\n    }\r\n\r\n    onMatrixBlur(event: any): void {\r\n        if (!event.relatedTarget || event.relatedTarget.className.indexOf('qs') < 0) {\r\n            this.isMatrixFocus = false;\r\n        }\r\n\r\n        this.onBlur(event);\r\n    }\r\n\r\n    onFocus(event: any): void {\r\n        this.isFocus = true;\r\n    }\r\n\r\n    onBlur(event: any): void {\r\n        this.isFocus = false;\r\n        this.cleanError();\r\n\r\n        const value = event.target ? event.target.value : event;\r\n\r\n        if (parseFloat(this.value) !== parseFloat(value)) {\r\n            this.value = value;\r\n            this.formattedValue = value;\r\n            this.customizationService.updateFormFieldValue(this.form, this.key, value);\r\n\r\n            // this.propagateChange(this.value, event.relatedTarget);\r\n            this.changeValue(this.value, event.relatedTarget);\r\n        } else {\r\n            this.focusToTheSameElementInTheWantedRow();\r\n        }\r\n    }\r\n\r\n    changeValue(value: any, lastFocusedField: any = null): void {\r\n        this.valueChanged.emit({ apiName: this.key, value, controlType: this.controlType, lastFocusedField });\r\n    }\r\n\r\n    increment(event): void {\r\n        if (this.standAlone) {\r\n            let tmp = parseFloat(this.value);\r\n\r\n            this.value = this.formattedValue = (++tmp).toString();\r\n            this.customizationService.updateFormFieldValue(this.form, this.key, this.value);\r\n        }\r\n\r\n        // this.propagateChange('+');\r\n        this.changeValue('+', null);\r\n        event.stopPropagation();\r\n    }\r\n\r\n    decrement(event): void {\r\n        if (this.standAlone) {\r\n            let tmp = parseFloat(this.value);\r\n\r\n            this.value = this.formattedValue = (--tmp).toString();\r\n            this.customizationService.updateFormFieldValue(this.form, this.key, this.value);\r\n        }\r\n\r\n        // this.propagateChange('-');\r\n        this.changeValue('-', null);\r\n        event.stopPropagation();\r\n    }\r\n\r\n    enterChildren(event): void {\r\n        this.elementClicked.emit({ apiName: PepperiQuantitySelectorComponent.ENTER_CHILDREN, eventWhich: event.which });\r\n    }\r\n\r\n    enterPackage(event): void {\r\n        this.elementClicked.emit({\r\n            apiName: PepperiQuantitySelectorComponent.ENTER_PACKAGE,\r\n            eventWhich: event.which, otherData: this.notificationInfo\r\n        });\r\n    }\r\n\r\n    setQsView(): void {\r\n        if (this.layoutType === LAYOUT_TYPE.Editmodal ||\r\n            this.layoutType === LAYOUT_TYPE.PepperiCard && this.rowSpan <= 1) {\r\n            this.showQsBtn = false;\r\n        } else {\r\n            if (this.QSCont && this.QSCont.nativeElement) {\r\n                this.showQsBtn = this.QSCont.nativeElement.clientWidth > 140;\r\n            }\r\n        }\r\n\r\n        // Get state class from theme.\r\n        // this.styleClass = this.customizationService.getThemeVariable(CustomizationService.STYLE_QS_KEY);\r\n        this.styleClass = document.documentElement.style.getPropertyValue(CustomizationService.STYLE_QS_KEY) as STYLE_TYPE;\r\n\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    onKeyPress(event): any {\r\n        let inputChar = String.fromCharCode(event.charCode);\r\n        const keyboardEvent = event as KeyboardEvent;\r\n\r\n        if (keyboardEvent.keyCode === 13) {\r\n            this.setSameElementInTheWantedRow(keyboardEvent, !keyboardEvent.shiftKey);\r\n            return true;\r\n        }\r\n\r\n        // TODO: Make it one function like in PepperiTextboxComponent\r\n        if (\r\n            /*[8, 9, 27, 13, 190].indexOf(keyboardEvent.keyCode) !== -1 ||*/\r\n            // Allow: Ctrl+A\r\n            (keyboardEvent.keyCode === 65 && keyboardEvent.ctrlKey === true) ||\r\n            // Allow: Ctrl+C\r\n            (keyboardEvent.keyCode === 67 && keyboardEvent.ctrlKey === true) ||\r\n            // Allow: Ctrl+V\r\n            (keyboardEvent.keyCode === 86 && keyboardEvent.ctrlKey === true) ||\r\n            // Allow: Ctrl+X\r\n            (keyboardEvent.keyCode === 88 &&\r\n                keyboardEvent.ctrlKey === true) /*||\r\n            // Allow: home, end, left, right\r\n            (keyboardEvent.keyCode >= 35 && keyboardEvent.keyCode <= 39)*/\r\n        ) {\r\n            // let it happen, don't do anything\r\n            return true;\r\n        }\r\n\r\n        if (this.alowDecimal) {\r\n            const decPoint = '.';\r\n            const thousandSeparator = ',';\r\n            const pattern = /^\\d[\\d,]*(\\.\\d+)?$/;\r\n            if (keyboardEvent.keyCode === 46) {\r\n                inputChar = inputChar + '0';\r\n            } else if (keyboardEvent.keyCode === 44) {\r\n                inputChar = inputChar + '000';\r\n            }\r\n            if (!pattern.test(event.target.value + inputChar)) {\r\n                keyboardEvent.preventDefault();\r\n            }\r\n        } else {\r\n            const pattern = /[0-9\\+\\-\\ ]/;\r\n            if (!pattern.test(inputChar)) {\r\n                keyboardEvent.preventDefault();\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\n\r\nimport { MatCommonModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatIconModule } from '@angular/material/icon';\r\n\r\nimport { PepperiModule } from '@pepperi-addons/ngx-lib';\r\nimport { PepperiIconModule, PepperiIconRegistry, pepperiIconNumberMinus, pepperiIconNumberPlus } from '@pepperi-addons/ngx-lib/icon';\r\nimport { PepperiFieldTitleModule } from '@pepperi-addons/ngx-lib/field-title';\r\n\r\nimport { PepperiQuantitySelectorComponent } from './quantity-selector.component';\r\nimport { QuantitySelectorNumber } from './quantity-selector.pipes';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        BrowserModule,\r\n        BrowserAnimationsModule,\r\n        ReactiveFormsModule,\r\n        FormsModule,\r\n        // Material modules\r\n        MatCommonModule,\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n        MatBadgeModule,\r\n        MatIconModule,\r\n        // Pepperi modules\r\n        PepperiModule,\r\n        PepperiIconModule,\r\n        PepperiFieldTitleModule\r\n    ],\r\n    exports: [ PepperiQuantitySelectorComponent ],\r\n    declarations: [ PepperiQuantitySelectorComponent, QuantitySelectorNumber ],\r\n})\r\nexport class PepperiQuantitySelectorModule {\r\n    constructor(private pepperiIconRegistry: PepperiIconRegistry) {\r\n        this.pepperiIconRegistry.registerIcons([\r\n            pepperiIconNumberMinus,\r\n            pepperiIconNumberPlus\r\n        ]);\r\n    }\r\n}\r\n","/*\r\n * Public API Surface of ngx-lib/quantity-selector\r\n */\r\nexport * from './quantity-selector.module';\r\nexport * from './quantity-selector.component';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelement","i0.ɵɵproperty","i0.ɵɵelementContainer","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵclassMapInterpolate1","i0.ɵɵpropertyInterpolate","i0.ɵɵadvance","i0.ɵɵtextInterpolate1","i0.ɵɵlistener","i0.ɵɵtextInterpolate2","i0.ɵɵtemplate","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd"],"mappings":"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"}